ply : lex yacc PY

lex : lentries

lentries : lentries lentry
         | 

lentry : '%' lVar
      | lFunc

lVar : LITERALS '=' STR
     | LITERALS '=' '[' lStr ']'
     | IGNORE '=' STR
     | TOKENS '=' '[' lStr ']'

lStr : lStr ',' STR
     | STR
     | LIT

lFunc : STR RETURN '(' STR ',' res ')'
      | STR ERROR '(' STR ',' RES ')'

res : type '(' RES ')'
    | RES

type : INT
     | FLOAT

yacc : yentries

yentries : yentries yentry
         | 

yentry : '%' yvar
       | rules RES
       | gvar


yvar : PRECEDENCE '=' '[' lPrecedencesElem ']'

lPrecedencesElem : lPrecedencesElem ',' precedencesElem
                  | precedencesElem

precedencesElem : '(' LStr ')'

gvar : ID '=' RES

rules : ID ':' syms

syms : syms sym
     | sym

sym : UCASE
    | ID
    | LIT
          